<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Listado de Internos</title>
<style>
    body {
        font-family: Arial, sans-serif;
        background: #f4f4f4;
        margin: 0;
        padding: 20px;
    }
    h1 {
        text-align: center;
        color: #333;
    }
    #search {
        width: 60%;
        margin: 20px auto;
        display: block;
        padding: 10px;
        font-size: 16px;
        border: 1px solid #ccc;
        border-radius: 8px;
    }
    table {
        width: 80%;
        margin: 20px auto;
        border-collapse: collapse;
        background: #fff;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    th {
        background: #1976d2;
        color: white;
        padding: 12px;
        font-size: 16px;
    }
    td {
        padding: 10px;
        border-bottom: 1px solid #ddd;
    }
    tr:hover {
        background: #f1f1f1;
    }
</style>
</head>
<body>

<h1>Listado de Internos</h1>

<input type="text" id="search" placeholder="Buscar interno, persona o sector...">

<table id="tabla">
    <thead>
        <tr>
            <th>Interno</th>
            <th>Persona</th>
            <th>Sector</th>
        </tr>
    </thead>
    <tbody></tbody>
</table>

<script>
const CSV_URL = "https://docs.google.com/spreadsheets/d/e/2PACX-1vTCSYe75_r2Etckwzz2kpIaCvbfM-2qV8Vt8tE9gA4jrLy3odgE4GSJvRHyNKpDGg/pub?output=csv";

async function cargarCSV() {
    const response = await fetch(CSV_URL);
    const data = await response.text();
    const filas = data.split("\n").map(f => f.split(","));

    const tbody = document.querySelector("#tabla tbody");
    tbody.innerHTML = "";

    filas.slice(1).forEach(row => {
        if (row.length < 3) return; // ahora necesitamos 3 columnas mÃ­nimo
        let tr = document.createElement("tr");
        tr.innerHTML = `
            <td>${row[0]}</td>
            <td>${row[1]}</td>
            <td>${row[2]}</td>
        `;
        tbody.appendChild(tr);
    });
}

document.getElementById("search").addEventListener("keyup", function() {
    let filtro = this.value.toLowerCase();
    let filas = document.querySelectorAll("#tabla tbody tr");

    filas.forEach(fila => {
        let texto = fila.textContent.toLowerCase();
        fila.style.display = texto.includes(filtro) ? "" : "none";
    });
});

cargarCSV();
</script>

</body>
</html>
